import{E as f,G as g,s as l,_ as p,o as u,a as _,r as D,b as o,t as x,w as c,i as h,c as C,F as y}from"./index-3d49a97b.js";import{d as m}from"./dayjs.min-1d2fa511.js";const w={name:"eChart1",props:{fromData:{type:Object,required:!0}},data(){return{eChart:null,eChartSetting:null,option:{title:{},tooltip:{trigger:"axis",renderMode:"richText"},legend:{selectedMode:!0,selected:{},itemWidth:40,itemHeight:20},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{},xAxis:{type:"category",boundaryGap:!1},yAxis:{type:"value"},series:[]}}},watch:{async fromData(){await this.preLoading(),this.eChart.setOption(this.option)}},mounted(){this.eChart=f(g(this.$refs["eChart-container"])),this.eChart.on("legendselectchanged",this.legendselectchanged)},created(){window.addEventListener("resize",this.resizeHandler)},destroyed(){window.removeEventListener("resize",this.resizeHandler)},methods:{async preLoading(){this.option.series=[];const s=await l().getRecordingTable;let a=Array.from(this.fromData),n={};s.map(t=>{n[t.colName]=[]}),a=a.sort((t,e)=>{const i=new Date(t[0]),r=new Date(e[0]).getTime()-i.getTime();return r>0?-1:r<0?1:0}),a.map(t=>{Object.entries(t).map(([e,i])=>{const d=s.find(r=>r.id===parseInt(e))?.colName;d&&n[d]&&n[d].push(i)})}),Object.entries(n).map(([t,e])=>{t==="0"?this.option.xAxis.data=n[t]:this.option.series.push({name:t,type:"line",stack:"Total",data:e})}),this.eChartSetting=l().eChartSetting,this.eChartSetting.selected&&(this.option.legend.selected=this.eChartSetting.selected)},resizeHandler(){this.eChart.resize()},legendselectchanged(s){this.eChartSetting.selected=s.selected,l().setEChartSetting(this.eChartSetting)}}};const b={class:"",ref:"eChart-container"};function T(s,a,n,t,e,i){return u(),_("div",b,null,512)}const v=p(w,[["render",T],["__scopeId","data-v-61adb9df"]]),S={name:"chart",components:{eChart1:v},data(){return{startDate:"",endDate:"",today:""}},computed:{filteredList(){const s=l().bodyFatDatalist,a=new Date(this.startDate+"T00:00:00").getTime(),n=new Date(this.endDate+"T23:59:59").getTime();return s.filter(e=>{const i=new Date(e[0]).getTime();if(a<i&&i<n)return e})}},mounted(){this.startDate=m(new Date().setDate(-14)).format("YYYY-MM-DD"),this.endDate=m(new Date).format("YYYY-MM-DD"),this.today=this.endDate}},L={id:"search_content",class:"m-2"},Y={class:"text-gray-700 flex items-center"},M={class:"label-xl text-base w-1/6"},z=["max"],$=o("span",null,"~",-1),E=["max"];function N(s,a,n,t,e,i){const d=D("eChart1");return u(),_(y,null,[o("div",L,[o("div",null,[o("label",Y,[o("span",M,x(s.$t("_date_interval")),1),c(o("input",{type:"date",class:"input text-base w-1/3","onUpdate:modelValue":a[0]||(a[0]=r=>e.startDate=r),max:e.today},null,8,z),[[h,e.startDate]]),$,c(o("input",{type:"date",class:"input text-base w-1/3","onUpdate:modelValue":a[1]||(a[1]=r=>e.endDate=r),max:e.today},null,8,E),[[h,e.endDate]])])])]),C(d,{class:"h-5/6",fromData:i.filteredList},null,8,["fromData"])],64)}const H=p(S,[["render",N]]);export{H as default};
